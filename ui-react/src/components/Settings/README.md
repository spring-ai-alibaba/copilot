# 设置管理功能

## 功能概述

设置管理模块提供了完整的系统配置功能，包括知识库管理、模型管理、提示词管理等核心功能。

## 功能模块

### 1. 知识库管理 (Knowledge Base)
- **功能**: 管理RAG系统的知识库和文档
- **特性**: 
  - 创建和删除知识库
  - 上传和管理文档
  - 文档预览和搜索
  - 支持多种文档格式 (PDF, TXT, DOC, DOCX, MD)
- **位置**: `KnowledgeSettings/`

### 2. 模型管理 (Model Management)
- **功能**: 管理AI模型配置和连接设置
- **特性**:
  - 添加和配置各种AI模型
  - 支持文本生成、图像生成、向量化、重排序模型
  - 模型连接测试
  - 启用/禁用模型状态管理
- **位置**: `ModelSettings/`

### 3. 提示词管理 (Prompt Templates)
- **功能**: 管理和组织AI提示词模板
- **特性**:
  - 创建和编辑提示词模板
  - 变量化提示词支持
  - 分类和标签管理
  - 提示词预览和测试
  - 系统提示词和用户提示词
- **位置**: `PromptSettings/`

### 4. MCP服务器管理 (MCP Server)
- **功能**: 管理Model Context Protocol服务器
- **位置**: `MCPSettings/`

### 5. 常规设置 (General)
- **功能**: 基础系统设置
- **位置**: `GeneralSettings/`

### 6. 配额管理 (Quota)
- **功能**: 使用配额和限制管理
- **位置**: `QuotaSettings/`

## 技术架构

### 组件结构
```
Settings/
├── index.tsx                 # 主设置组件
├── KnowledgeSettings/        # 知识库管理
│   ├── index.tsx
│   ├── CreateKnowledgeBaseModal.tsx
│   ├── KnowledgePreview.tsx
│   └── KnowledgeSettings.css
├── ModelSettings/            # 模型管理
│   ├── index.tsx
│   └── ModelSettings.css
├── PromptSettings/           # 提示词管理
│   ├── index.tsx
│   ├── PromptEditor.tsx
│   ├── PromptPreview.tsx
│   └── PromptSettings.css
├── MCPSettings/              # MCP服务器管理
├── GeneralSettings/          # 常规设置
├── QuotaSettings/            # 配额管理
└── README.md                 # 说明文档
```

### API接口
```
api/
├── knowledge.ts              # 知识库API
├── models.ts                 # 模型管理API
├── prompts.ts                # 提示词API
└── mockKnowledgeData.ts      # 模拟数据
```

## 主要特性

### 🎨 用户界面
- **响应式设计**: 支持桌面端和移动端
- **暗色主题**: 完整的暗色模式支持
- **国际化**: 中英文双语支持
- **一致性**: 统一的设计语言和交互模式

### 🔧 技术特性
- **TypeScript**: 完整的类型安全
- **模块化**: 清晰的组件分离和复用
- **状态管理**: 高效的数据流管理
- **错误处理**: 完善的错误提示和恢复机制

### 📱 交互体验
- **实时反馈**: 即时的操作反馈
- **加载状态**: 清晰的加载指示器
- **确认对话**: 危险操作的二次确认
- **快捷操作**: 便捷的批量操作支持

## 开发模式

### 模拟数据支持
所有新功能都支持开发模式下的模拟数据：
- 知识库管理：完整的CRUD操作模拟
- 模型管理：模型配置和测试模拟
- 提示词管理：模板管理和预览模拟

### 环境配置
```bash
# 开发模式
NODE_ENV=development

# API地址配置
# 开发模式：不设置 APP_BASE_URL，所有请求通过 Vite 代理到后端 6039
# 生产/直连：设置为后端基址，例如：
# APP_BASE_URL=http://localhost:6039
```

## 使用指南

### 知识库管理
1. 点击"知识库"标签页
2. 创建新的知识库
3. 上传文档到知识库
4. 预览和搜索文档内容

### 模型管理
1. 点击"模型管理"标签页
2. 添加新的AI模型配置
3. 配置模型参数和API密钥
4. 测试模型连接
5. 启用/禁用模型

### 提示词管理
1. 点击"提示词"标签页
2. 浏览不同分类的提示词
3. 创建自定义提示词模板
4. 配置变量和参数
5. 预览和测试提示词效果

## 扩展开发

### 添加新的设置模块
1. 在`Settings/`目录下创建新的组件目录
2. 实现组件的主要功能
3. 在`Settings/index.tsx`中注册新的标签页
4. 添加相应的翻译文本
5. 创建对应的API接口

### 自定义样式
每个模块都有独立的CSS文件，支持：
- 主题定制
- 响应式调整
- 动画效果
- 交互状态

### API集成
- 开发模式：使用模拟数据进行开发和测试
- 生产模式：自动切换到真实API调用
- 错误处理：统一的错误处理和用户提示

## 最佳实践

### 组件开发
- 保持组件的单一职责
- 使用TypeScript确保类型安全
- 实现完整的错误边界处理
- 添加适当的加载状态

### 样式管理
- 使用CSS模块避免样式冲突
- 保持一致的设计规范
- 支持主题切换
- 优化移动端体验

### 数据管理
- 实现合理的缓存策略
- 处理并发请求
- 提供离线支持
- 优化加载性能

## 故障排除

### 常见问题
1. **模块加载失败**: 检查组件导入路径
2. **样式显示异常**: 确认CSS文件正确引入
3. **API调用失败**: 检查环境变量配置
4. **翻译文本缺失**: 确认翻译文件完整性

### 调试技巧
- 使用浏览器开发者工具
- 检查控制台错误信息
- 验证网络请求状态
- 确认组件状态变化

这个设置管理系统提供了完整的配置功能，支持扩展和定制，为用户提供了直观易用的管理界面。
